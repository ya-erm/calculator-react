{"version":3,"sources":["assets/icons/backspace.svg","model/CalculationToken.ts","model/Calculator.ts","model/index.ts","assets/icons/close.svg","components/CalculatorButton.tsx","components/CalculatorHeader.tsx","assets/icons/delete.svg","assets/icons/division.svg","assets/icons/equal.svg","assets/icons/minus.svg","assets/icons/plus.svg","components/CalculatorKeyboard.tsx","components/CalculatorView.tsx","App.tsx","index.tsx"],"names":["_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgBackspace","_ref","svgRef","title","titleId","props","xmlns","xmlnsXlink","width","height","viewBox","ref","id","d","ForwardRef","CalculationToken","type","value","canBeAfter","previous","canBeFirst","canBeLast","canBeUnary","isNumber","leftPriority","rightPriority","text","isNaN","parseFloat","Error","CalculatorError","message","position","performOperation","operationToken","left","right","Math","pow","calculate","expression","leftStack","rightStack","tokens","numberChars","bracketsCount","unary","checkToken","token","processNumber","numberText","join","pop","numberToken","parse","push","symbol","match","undefined","accumulator","toString","scroll","newToken","shift","leftToken","rightToken","delta","operation","leftOperand","result","error","console","log","roundTo","n","digits","negative","m","r","toFixed","Number","round","$input","createStore","$expression","$result","updateInput","createEvent","on","_","v","updateExpression","updateResult","keyPressed","numberKeyPressed","functionKeyPressed","evaluateKeyPressed","deleteKeyPressed","clearKeyPressed","guard","filter","prepend","includes","reset","appendToInput","prev","appendToExpression","appendNumberFx","createEffect","params","hasResult","input","number","endsWith","substring","sample","attach","effect","mapParams","nonRepeatingOperators","continueWithResultFx","values","split","map","x","trim","clock","appendOperator","operator","trimmedExpression","trimEnd","lastSymbol","insertMinusFx","evaluateFx","answer","isNum","CalculatorButton","icon","columns","onPress","css","useStyles","extraClass","numberButton","actionButton","maxSize","min","window","innerWidth","innerHeight","size","className","clsx","button","style","borderRadius","onClick","ActionButton","other","createUseStyles","border","display","alignItems","justifyContent","verticalAlign","textAlign","cursor","fontSize","userSelect","margin","opacity","color","backgroundColor","fill","formatThousands","a","b","pattern","test","replace","InputValue","useStore","ExpressionValue","CalculatorHeader","container","inputMain","separator","history","flexGrow","flexShrink","marginRight","whiteSpace","overflowWrap","SvgClose","SvgDelete","SvgDivision","SvgEqual","SvgMinus","SvgPlus","Row","children","useStyle","row","CalculatorKeyboard","NumberButton","FunctionButton","marginBottom","flexDirection","CalculatorView","windowSize","useEffect","document","addEventListener","e","preventDefault","passive","calculatorInput","backspace","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.47540de6.chunk.js","sourcesContent":["var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBackspace(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22,3H7C6.31,3 5.77,3.35 5.41,3.88L0,12L5.41,20.11C5.77,20.64 6.31,21 7,21H22C23.1,21 24,20.1 24,19V5C24,3.9 23.1,3 22,3M19,15.59L17.59,17L14,13.41L10.41,17L9,15.59L12.59,12L9,8.41L10.41,7L14,10.59L17.59,7L19,8.41L15.41,12\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBackspace);\nexport default __webpack_public_path__ + \"static/media/backspace.01c1d74d.svg\";\nexport { ForwardRef as ReactComponent };","type ICalculationTokenType =\n    | 'plus'\n    | 'minus'\n    | 'multiply'\n    | 'divide'\n    | 'mod'\n    | 'pow'\n    | 'leftBracket'\n    | 'rightBracket'\n    | 'number';\n\nexport class CalculationToken {\n    type: ICalculationTokenType;\n    value?: string;\n\n    constructor(type: ICalculationTokenType, value?: string) {\n        this.type = type;\n        this.value = value;\n    }\n\n    static parse(text: string) {\n        switch (text) {\n            case '+':\n                return new this('plus', text);\n            case '-':\n                return new this('minus', text);\n            case '*':\n                return new this('multiply', text);\n            case '/':\n                return new this('divide', text);\n            case '%':\n                return new this('mod', text);\n            case '^':\n                return new this('pow', text);\n            case '(':\n                return new this('leftBracket', text);\n            case ')':\n                return new this('rightBracket', text);\n\n            default:\n                if (isNaN(parseFloat(text))) {\n                    throw new Error(`Can't parse \"${text}\" as number token`);\n                }\n                return new this('number', text);\n        }\n    }\n\n    canBeAfter = (previous?: CalculationToken) => {\n        if (previous == null) {\n            return this.canBeFirst();\n        }\n        switch (this.type) {\n            case 'leftBracket':\n            case 'number':\n                switch (previous.type) {\n                    case 'rightBracket':\n                    case 'number':\n                        return false;\n                    default:\n                        return true;\n                }\n            case 'multiply':\n            case 'divide':\n            case 'mod':\n            case 'pow':\n            case 'rightBracket':\n                switch (previous.type) {\n                    case 'rightBracket':\n                    case 'number':\n                        return true;\n                    default:\n                        return false;\n                }\n            case 'plus':\n            case 'minus':\n                switch (previous.type) {\n                    case 'leftBracket':\n                    case 'rightBracket':\n                    case 'number':\n                        return true;\n                    default:\n                        return false;\n                }\n        }\n    };\n\n    canBeFirst = () => {\n        switch (this.type) {\n            case 'plus':\n            case 'minus':\n            case 'leftBracket':\n            case 'number':\n                return true;\n            case 'multiply':\n            case 'divide':\n            case 'mod':\n            case 'pow':\n            case 'rightBracket':\n                return false;\n        }\n    };\n\n    canBeLast = () => {\n        switch (this.type) {\n            case 'rightBracket':\n            case 'number':\n                return true;\n            default:\n                return false;\n        }\n    };\n\n    canBeUnary = () => {\n        switch (this.type) {\n            case 'minus':\n            case 'plus':\n                return true;\n            default:\n                return false;\n        }\n    };\n\n    isNumber = () => this.type === 'number';\n\n    leftPriority = () => {\n        switch (this.type) {\n            case 'plus':\n            case 'minus':\n                return 2;\n            case 'multiply':\n            case 'divide':\n            case 'mod':\n                return 4;\n            case 'pow':\n                return 5;\n            default:\n                return 0;\n        }\n    };\n\n    rightPriority = () => {\n        switch (this.type) {\n            case 'plus':\n            case 'minus':\n                return 1;\n            case 'multiply':\n            case 'divide':\n            case 'mod':\n                return 3;\n            case 'pow':\n                return 6;\n            default:\n                return 0;\n        }\n    };\n}\n","import { CalculationToken } from './CalculationToken';\n\nclass CalculatorError extends Error {\n    message: string;\n    position?: number;\n    constructor(message: string, position?: number) {\n        super();\n        this.message = message;\n        this.position = position;\n    }\n}\n\nconst parse: (expression: string) => CalculationToken[] = (expression) => {\n    let tokens: CalculationToken[] = [];\n    let previous: CalculationToken | null = null;\n    let numberChars: string[] = [];\n    let bracketsCount = 0;\n    let unary = false;\n\n    const checkToken = (token: CalculationToken, position: number) => {\n        if (!previous) {\n            if (!token.canBeFirst()) {\n                throw new CalculatorError(`Token ${token} can't be first`, position);\n            }\n        } else if (!token.canBeAfter(previous)) {\n            throw new CalculatorError(`Token ${token} can't be after ${previous.type}`, position);\n        }\n        if (position === expression.length - 1 && !token.canBeLast()) {\n            throw new CalculatorError(`Token ${token} can't be last`, position);\n        }\n    };\n\n    const processNumber = (position: number) => {\n        let numberText = numberChars.join('');\n        if (previous?.type === 'minus' && unary) {\n            numberText = `-${numberText}`;\n            tokens.pop();\n            previous = null;\n            unary = false;\n        }\n        const numberToken = CalculationToken.parse(numberText);\n        if (!numberToken) {\n            throw new CalculatorError(\n                `Failed to initialize number token from \"${numberText}\"`,\n                position,\n            );\n        }\n        checkToken(numberToken, position);\n        tokens.push(numberToken);\n        previous = numberToken;\n        numberChars = [];\n    };\n\n    for (let i = 0; i < expression.length; i++) {\n        const symbol = expression[i];\n        if (symbol === ' ') {\n            continue;\n        }\n        if (symbol.match(/\\d/) || symbol === '.') {\n            numberChars.push(symbol);\n            continue;\n        }\n        if (numberChars.length > 0) {\n            processNumber(i);\n        }\n        const token = CalculationToken.parse(symbol);\n        if (!token) {\n            throw new CalculatorError(`Unsupported symbol \"${symbol}\"`, i);\n        }\n        switch (token.type) {\n            case 'minus':\n                switch (previous?.type) {\n                    case 'leftBracket':\n                    case 'pow':\n                    case null:\n                    case undefined:\n                        unary = true;\n                        break;\n                    default:\n                        unary = false;\n                        break;\n                }\n                break;\n            case 'leftBracket':\n                bracketsCount += 1;\n                break;\n            case 'rightBracket':\n                bracketsCount -= 1;\n                break;\n            default:\n                break;\n        }\n        if (bracketsCount < 0) {\n            throw new CalculatorError('Closed brackets more than opened', i);\n        }\n        checkToken(token, i);\n        tokens.push(token);\n        previous = token;\n    }\n    if (numberChars.length > 0) {\n        processNumber(expression.length - 1);\n    }\n    if (bracketsCount > 0) {\n        throw new CalculatorError('Opened brackets more than closed', expression.length - 1);\n    }\n\n    return tokens;\n};\n\nconst performOperation = (operationToken: CalculationToken, left: number, right: number) => {\n    switch (operationToken.type) {\n        case 'plus':\n            return left + right;\n        case 'minus':\n            return left - right;\n        case 'multiply':\n            return left * right;\n        case 'divide':\n            return left / right;\n        case 'mod':\n            return left % right;\n        case 'pow':\n            return Math.pow(left, right);\n        case 'leftBracket':\n        case 'rightBracket':\n        case 'number':\n            throw Error(`${operationToken.type} is not operationToken`);\n    }\n};\n\nexport const calculate = (expression: string, previous: number | null) => {\n    try {\n        let leftStack: CalculationToken[] = [];\n        let rightStack = parse(expression);\n        let accumulator: number | null = null;\n\n        if (previous) {\n            rightStack[0] = new CalculationToken('number', previous.toString());\n        }\n\n        const scroll = () => {\n            const accumulatedValue = accumulator;\n            if (accumulatedValue !== null) {\n                const newToken = new CalculationToken('number', accumulatedValue.toString());\n                leftStack = [newToken, ...leftStack];\n                accumulator = null;\n            }\n            do {\n                if (rightStack.length === 0) {\n                    return;\n                }\n                const token = rightStack.shift();\n                if (!token) {\n                    return;\n                }\n                switch (token.type) {\n                    case 'number':\n                        accumulator = parseFloat(token.value!);\n                        return;\n                    default:\n                        leftStack = [token, ...leftStack];\n                        break;\n                }\n            } while (true);\n        };\n\n        scroll();\n        while (true) {\n            let leftToken = leftStack[0];\n            const rightToken = rightStack[0];\n            let delta = (leftToken?.leftPriority() ?? 0) - (rightToken?.rightPriority() ?? 0);\n            if (leftToken && delta > 0) {\n                const operation = leftStack.shift();\n                const leftOperand = leftStack.shift();\n                if (!operation || !leftOperand) {\n                    return;\n                }\n                switch (leftOperand.type) {\n                    case 'number':\n                        const value = parseFloat(leftOperand.value!);\n                        const result = performOperation(operation, value, accumulator ?? 0);\n                        accumulator = result;\n                        leftToken = leftStack[0];\n                        delta =\n                            (leftToken?.leftPriority() ?? 0) - (rightToken?.rightPriority() ?? 0);\n                        break;\n                    default:\n                        throw new Error(`Left operand ${leftOperand.type} is not number`);\n                }\n            }\n            if (rightToken && rightToken?.type !== 'number' && delta < 0) {\n                scroll();\n            }\n            if (leftToken?.type === 'leftBracket' && rightToken?.type === 'rightBracket') {\n                leftStack.shift();\n                rightStack.shift();\n            }\n            if (leftStack.length === 0 && rightStack.length === 0) {\n                break;\n            }\n        }\n\n        return accumulator;\n    } catch (error) {\n        console.log(error);\n        return 'Error';\n    }\n};\n\nexport function roundTo(n: number, digits?: number) {\n    let negative = false;\n    if (digits === undefined) {\n        digits = 0;\n    }\n    if (n < 0) {\n        negative = true;\n        n = -1 * n;\n    }\n    let m = Math.pow(10, digits);\n    let r = parseFloat((n * m).toFixed(11));\n    r = Number((Math.round(r) / m).toFixed(digits));\n    if (negative) {\n        r = -1 * r;\n    }\n    return r;\n}\n","import { attach, createEffect, createEvent, createStore, guard, sample } from 'effector';\nimport { calculate, roundTo } from './Calculator';\n\nexport const $input = createStore('0');\nexport const $expression = createStore('0');\nexport const $result = createStore<number | null>(null);\n\nconst updateInput = createEvent<string>();\n$input.on(updateInput, (_, v) => v);\n\nconst updateExpression = createEvent<string>();\n$expression.on(updateExpression, (_, v) => v);\n\nconst updateResult = createEvent<number | null>();\n$result.on(updateResult, (_, v) => v);\n\nexport const keyPressed = createEvent<string>();\n\nconst numberKeyPressed = createEvent<string>();\nconst functionKeyPressed = createEvent<string>();\nconst evaluateKeyPressed = createEvent();\nconst deleteKeyPressed = createEvent();\nconst clearKeyPressed = createEvent();\n\n// #region Map keyPressed to actions\n\nguard({\n    source: keyPressed,\n    filter: (v) => ('0' <= v && v <= '9') || v === '(' || v === ')',\n    target: numberKeyPressed,\n});\n\nguard({\n    source: keyPressed,\n    filter: (v) => v === '.' || v === ',',\n    target: numberKeyPressed.prepend(() => '.'),\n});\n\nguard({\n    source: keyPressed,\n    filter: (v) => ['+', '-', '*', '/'].includes(v),\n    target: functionKeyPressed,\n});\n\nguard({\n    source: keyPressed,\n    filter: (v) => v === 'Enter' || v === '=',\n    target: evaluateKeyPressed,\n});\n\nguard({\n    source: keyPressed,\n    filter: (v) => v === 'Clear' || v === 'C',\n    target: clearKeyPressed,\n});\n\nguard({\n    source: keyPressed,\n    filter: (v) => v === 'Backspace',\n    target: deleteKeyPressed,\n});\n\n// #endregion\n\n// #region Clear key\n\n$input.reset(clearKeyPressed);\n$expression.reset(clearKeyPressed);\n$result.reset(clearKeyPressed);\n\n// #endregion\n\n// #region Number keys\n\n// $input.watch((v) => console.log('Input changed to', v));\n\nconst appendToInput = createEvent<string>();\n$input.on(appendToInput, (prev, value) => prev + value);\n\nconst appendToExpression = createEvent<string>();\n$expression.on(appendToExpression, (prev, value) => prev + value);\n\nconst appendNumberFx = createEffect(\n    (params: { input: string; expression: string; number: string }) => {\n        const hasResult = params.expression.includes('=');\n        let expression = hasResult ? '0' : params.expression;\n        const input = hasResult ? '0' : params.input;\n        const number = params.number;\n\n        if (hasResult) {\n            updateResult(null);\n        }\n\n        if (input === '0' && '0123456789()'.includes(number)) {\n            updateInput(number);\n            if (expression.endsWith('0')) {\n                updateExpression(expression.substring(0, expression.length - 1) + number);\n            } else {\n                appendToExpression(number);\n            }\n            return;\n        }\n        if (input === '-' && number === '.') {\n            updateInput('-0.');\n            updateExpression('-0.');\n            return;\n        }\n        if (input.includes('.') && number === '.') {\n            return;\n        }\n        if (input === '0' && number === '.') {\n            if (!expression.endsWith('0')) {\n                expression += '0';\n            }\n        }\n        updateInput(input + number);\n        updateExpression(expression + number);\n    },\n);\n\nsample({\n    source: numberKeyPressed,\n    target: attach({\n        effect: appendNumberFx,\n        source: { input: $input, expression: $expression },\n        mapParams: (number: string, { input, expression }) => ({\n            input,\n            expression,\n            number,\n        }),\n    }),\n});\n\n// #endregion\n\n// #region Function keys\n\nconst nonRepeatingOperators = ['+', '-', '/', '*'];\n\nconst continueWithResultFx = createEffect((expression: string) => {\n    if (!expression.includes('=')) {\n        return;\n    }\n    const values = expression.split('=').map((x) => x.trim());\n    const value = values[values.length - 1] ?? '0';\n    updateExpression(value + ' ');\n    return value;\n});\n\n// if expression contains calculation result then continue with result\nsample({\n    clock: functionKeyPressed,\n    target: attach({\n        effect: continueWithResultFx,\n        source: $expression,\n    }),\n});\n\nconst appendOperator = createEvent<string>();\n$expression.on(appendOperator, (prev, operator) => {\n    let trimmedExpression = prev.trimEnd();\n    if (trimmedExpression === '0' && operator === '-') {\n        return '-';\n    }\n    const lastSymbol = trimmedExpression[trimmedExpression.length - 1];\n    if (nonRepeatingOperators.includes(lastSymbol)) {\n        trimmedExpression = trimmedExpression.substring(0, trimmedExpression.length - 1).trimEnd();\n    }\n    return trimmedExpression + ` ${operator} `;\n});\n\nguard({\n    clock: functionKeyPressed,\n    filter: (expression) => !expression.includes('='),\n    target: appendOperator,\n});\n\nconst insertMinusFx = createEffect((expression: string) => {\n    if (expression.trim() === '-') {\n        updateInput('-');\n    }\n});\n\nguard({\n    source: functionKeyPressed,\n    filter: (operator) => operator === '-',\n    target: attach({ effect: insertMinusFx, source: $expression }),\n});\n\nguard({\n    clock: functionKeyPressed,\n    source: $expression,\n    filter: (expression) => expression.trim() !== '-',\n    target: updateInput.prepend(() => '0'),\n});\n\n// #endregion\n\n// #region Backspace key\n\n$input.on(deleteKeyPressed, (prev) => {\n    return prev.length > 1 ? prev.substring(0, prev.length - 1) : '0';\n});\n$expression.on(deleteKeyPressed, (prev) => {\n    return prev.length > 1\n        ? prev\n              .trimEnd()\n              .substring(0, prev.trimEnd().length - 1)\n              .trimEnd()\n        : '0';\n});\n$result.reset(deleteKeyPressed);\n\n// #endregion\n\n// #region Evaluate key\n\nconst evaluateFx = createEffect((params: { expression: string; result: number | null }) => {\n    let expression = params.expression;\n    if (expression.endsWith('.')) {\n        expression += '0';\n        appendToInput('0');\n        appendToExpression('0');\n    }\n    const answer = calculate(expression, params.result);\n    const isNum = typeof answer == 'number';\n    updateInput(`${answer}`);\n    updateExpression(expression + ` = ${isNum ? roundTo(answer, 10) : answer}`);\n    updateResult(isNum ? answer : null);\n});\n\nsample({\n    clock: evaluateKeyPressed,\n    source: { expression: $expression, result: $result },\n    target: evaluateFx,\n});\n\n// #endregion\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.5cd3645c.svg\";\nexport { ForwardRef as ReactComponent };","import clsx from 'clsx';\nimport React from 'react';\nimport { createUseStyles } from 'react-jss';\n\nexport type IButtonProps = {\n    text: string;\n    icon?: JSX.Element;\n    type?: 'action' | 'number';\n    columns?: number;\n    onPress?: () => any;\n};\n\nexport const BUTTON_SIZE = 85;\nexport const BUTTON_MARGIN = 5;\nexport const BUTTON_FULL_SIZE = BUTTON_SIZE + 2 * BUTTON_MARGIN;\n\nexport const CalculatorButton: React.FC<IButtonProps> = ({\n    text,\n    icon,\n    type = 'number',\n    columns = 1,\n    onPress = () => {},\n}) => {\n    const css = useStyles();\n    const extraClass = type === 'number' ? css.numberButton : css.actionButton;\n\n    const maxSize = Math.min(window.innerWidth, window.innerHeight) / 4;\n    const size = Math.min(BUTTON_SIZE, maxSize);\n\n    return (\n        <button\n            className={clsx(css.button, extraClass)}\n            style={{\n                height: size,\n                width: columns * size + (columns - 1) * 2 * BUTTON_MARGIN,\n                borderRadius: size,\n            }}\n            onClick={onPress}\n            aria-label={text}\n        >\n            {icon ? icon : text}\n        </button>\n    );\n};\n\nexport const ActionButton: React.FC<IButtonProps> = ({ text, type = 'action', ...other }) => (\n    <CalculatorButton text={text} type={type} {...other} />\n);\n\nconst useStyles = createUseStyles({\n    button: {\n        border: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        verticalAlign: 'middle',\n        textAlign: 'center',\n        cursor: 'pointer',\n        fontSize: 30,\n        userSelect: 'none',\n        margin: BUTTON_MARGIN,\n\n        '&:hover': {\n            opacity: 0.95,\n        },\n\n        '&:active': {\n            opacity: 0.6,\n        },\n\n        '& svg': {\n            width: '35px',\n            height: '35px',\n        },\n    },\n    numberButton: {\n        color: 'black',\n        backgroundColor: '#D6E2FC',\n    },\n    actionButton: {\n        backgroundColor: '#285FF5',\n        color: 'white',\n        fill: 'white',\n    },\n    icon: {\n        width: '100%',\n        height: '100%',\n    },\n});\n","import { useStore } from 'effector-react';\nimport React from 'react';\nimport { createUseStyles } from 'react-jss';\nimport { roundTo } from '../model/Calculator';\nimport { $expression, $input } from '../model';\n\nconst formatThousands = (x: number | string) => {\n    let [a, b] = x.toString().split('.');\n    const pattern = /(-?\\d+)(\\d{3})/;\n    while (pattern.test(a)) {\n        a = a.replace(pattern, '$1 $2');\n    }\n    if (b !== undefined) {\n        return [a, b].join('.');\n    }\n    if (x.toString().endsWith('.')) {\n        return `${a}.`;\n    }\n    return a;\n};\n\nconst InputValue: React.FC = () => {\n    const input = useStore($input);\n    const number = Number(input);\n    const value =\n        isNaN(number) || input.endsWith('.') || /^\\d+.*0+$/.test(input)\n            ? input\n            : roundTo(number, 10);\n    return <>{formatThousands(value)}</>;\n};\n\nconst ExpressionValue: React.FC = () => {\n    const expression = useStore($expression);\n    return <>{expression}</>;\n};\n\nconst CalculatorHeader: React.FC = () => {\n    const css = useStyles();\n\n    return (\n        <div className={css.container}>\n            <div className={css.inputMain} aria-label=\"input\">\n                <InputValue />\n            </div>\n            <div className={css.separator} />\n            <div className={css.history} aria-label=\"history\">\n                <ExpressionValue />\n            </div>\n        </div>\n    );\n};\n\nexport default CalculatorHeader;\n\nconst useStyles = createUseStyles({\n    container: {\n        flexGrow: 1,\n        flexShrink: 1,\n        marginRight: 20,\n    },\n    inputMain: {\n        fontSize: 30,\n        textAlign: 'right',\n        whiteSpace: 'pre-wrap',\n        overflowWrap: 'anywhere',\n    },\n    history: {\n        textAlign: 'right',\n        fontSize: 20,\n        whiteSpace: 'pre-wrap',\n        overflowWrap: 'anywhere',\n    },\n    separator: {\n        height: 1,\n        backgroundColor: '#CCCCCC',\n        margin: '5px 0',\n    },\n});\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDelete(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19C6,20.1 6.9,21 8,21H16C17.1,21 18,20.1 18,19V7H6V19Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDelete);\nexport default __webpack_public_path__ + \"static/media/delete.9a9cf5c8.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDivision(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,13H5V11H19V13M12,5C13.1,5 14,5.9 14,7C14,8.1 13.1,9 12,9C10.9,9 10,8.1 10,7C10,5.9 10.9,5 12,5M12,15C13.1,15 14,15.9 14,17C14,18.1 13.1,19 12,19C10.9,19 10,18.1 10,17C10,15.9 10.9,15 12,15Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDivision);\nexport default __webpack_public_path__ + \"static/media/division.55be698f.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEqual(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,10H5V8H19V10M19,16H5V14H19V16Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEqual);\nexport default __webpack_public_path__ + \"static/media/equal.b0622ac0.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMinus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,13H5V11H19V13Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMinus);\nexport default __webpack_public_path__ + \"static/media/minus.686d0e9d.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPlus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlus);\nexport default __webpack_public_path__ + \"static/media/plus.f48bf0f7.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { createUseStyles } from 'react-jss';\nimport { ReactComponent as MultiplyIcon } from '../assets/icons/close.svg';\nimport { ReactComponent as TrashIcon } from '../assets/icons/delete.svg';\nimport { ReactComponent as DivideIcon } from '../assets/icons/division.svg';\nimport { ReactComponent as EqualsIcon } from '../assets/icons/equal.svg';\nimport { ReactComponent as MinusIcon } from '../assets/icons/minus.svg';\nimport { ReactComponent as PlusIcon } from '../assets/icons/plus.svg';\nimport { keyPressed } from '../model';\nimport { ActionButton, CalculatorButton, IButtonProps } from './CalculatorButton';\n\ntype ICalculatorKeyboardProps = {};\n\nconst Row: React.FC = ({ children }) => {\n    const css = useStyle();\n    return <div className={css.row}>{children}</div>;\n};\n\nconst CalculatorKeyboard: React.FC<ICalculatorKeyboardProps> = () => {\n    const NumberButton: React.FC<IButtonProps> = ({ text, type = 'number', ...other }) => (\n        <CalculatorButton text={text} type={type} onPress={() => keyPressed(text)} {...other} />\n    );\n\n    const FunctionButton: React.FC<IButtonProps> = ({ text, type = 'action', ...other }) => (\n        <CalculatorButton text={text} type={type} onPress={() => keyPressed(text)} {...other} />\n    );\n\n    const css = useStyle();\n\n    return (\n        <div className={css.container}>\n            <Row>\n                <ActionButton text=\"C\" icon={<TrashIcon />} onPress={() => keyPressed('C')} />\n                <NumberButton text=\"(\" type=\"action\" />\n                <NumberButton text=\")\" type=\"action\" />\n                <FunctionButton text=\"/\" icon={<DivideIcon />} />\n            </Row>\n            <Row>\n                <NumberButton text=\"7\" />\n                <NumberButton text=\"8\" />\n                <NumberButton text=\"9\" />\n                <FunctionButton text=\"*\" icon={<MultiplyIcon />} />\n            </Row>\n            <Row>\n                <NumberButton text=\"4\" />\n                <NumberButton text=\"5\" />\n                <NumberButton text=\"6\" />\n                <FunctionButton text=\"-\" icon={<MinusIcon />} />\n            </Row>\n            <Row>\n                <NumberButton text=\"1\" />\n                <NumberButton text=\"2\" />\n                <NumberButton text=\"3\" />\n                <FunctionButton text=\"+\" icon={<PlusIcon />} />\n            </Row>\n            <Row>\n                <NumberButton text=\"0\" columns={2} />\n                <NumberButton text=\".\" />\n                <ActionButton text=\"=\" onPress={() => keyPressed('=')} icon={<EqualsIcon />} />\n            </Row>\n        </div>\n    );\n};\n\nexport default CalculatorKeyboard;\n\nconst useStyle = createUseStyles({\n    container: {\n        marginBottom: 20,\n    },\n    row: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'center',\n    },\n});\n","import React, { useEffect } from 'react';\nimport { createUseStyles } from 'react-jss';\nimport { ReactComponent as BackspaceIcon } from '../assets/icons/backspace.svg';\nimport { keyPressed } from '../model';\nimport { ActionButton, BUTTON_FULL_SIZE } from './CalculatorButton';\nimport CalculatorHeader from './CalculatorHeader';\nimport CalculatorKeyboard from './CalculatorKeyboard';\n\ntype ICalculatorViewProps = {};\n\nconst CalculatorView: React.FC<ICalculatorViewProps> = () => {\n    const css = useStyles();\n    const windowSize = Math.min(window.innerWidth, window.innerHeight);\n\n    useEffect(() => {\n        // Disable scroll on mobile devices\n        document.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });\n\n        // Keyboard input\n        window.addEventListener('keydown', (e: KeyboardEvent) => keyPressed(e.key));\n\n        // Clear at render\n        keyPressed('Clear');\n    }, []);\n\n    return (\n        <div className={css.container}>\n            <div style={{ width: Math.min(4 * BUTTON_FULL_SIZE, windowSize) }}>\n                <div className={css.calculatorInput}>\n                    <CalculatorHeader />\n                    <div className={css.backspace}>\n                        <ActionButton\n                            text=\"Backspace\"\n                            icon={<BackspaceIcon />}\n                            onPress={() => keyPressed('Backspace')}\n                        />\n                    </div>\n                </div>\n                <CalculatorKeyboard />\n            </div>\n        </div>\n    );\n};\n\nexport default CalculatorView;\n\nconst useStyles = createUseStyles({\n    container: {\n        height: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    calculatorInput: {\n        display: 'flex',\n        alignItems: 'center',\n        marginBottom: 20,\n    },\n    backspace: {\n        flexShrink: 0,\n    },\n});\n","import React from 'react';\nimport CalculatorView from './components/CalculatorView';\n\nfunction App() {\n    return <CalculatorView />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}